(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b771bfd"],{"1b80":function(t,a,n){"use strict";a["a"]={data:function(){return{pagination:{page:1,pageSize:10,total:0,showTotal:function(t,a){return"共 ".concat(t," 条")}}}},computed:{requestData:function(){return{page:this.pagination.page,pageSize:this.pagination.pageSize}}},methods:{init:function(){},pageChange:function(t){this.pagination.page=t,this.requestData.page=t.current,this.init()}}}},"706e":function(t,a,n){"use strict";n.r(a);var e=function(){var t=this,a=this,n=a.$createElement,e=a._self._c||n;return e("div",{staticClass:"account-index"},[e("wrapper-content",[e("div",{staticClass:"action"}),e("a-table",{attrs:{columns:a.columns,dataSource:a.dataSource,loading:a.loading,rowKey:"id",pagination:a.pagination},on:{change:a.pageChange},scopedSlots:a._u([{key:"avatar",fn:function(t,a,n){return[e("a-avatar",{attrs:{src:a.avatar}})]}},{key:"status",fn:function(t,n,o){return[n.status?e("span",{staticClass:"success-color"},[a._v("使用中")]):e("span",[a._v("已禁用")])]}},{key:"action",fn:function(t,n,o){return[n.is_owner?a._e():[e("a",{on:{click:function(t){return a.rowClick(n,"edit")}}},[a._v("编辑")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{on:{click:function(t){return a.auth(n)}}},[a._v("授权")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{on:{click:function(t){return a.rowClick(n,"status")}}},[n.status?e("span",[a._v("禁用")]):e("span",[a._v("启用")])]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{on:{click:function(t){return a.rowClick(n,"del")}}},[a._v("删除")])]]}}])})],1),e("a-modal",{attrs:{width:800,title:a.actionInfo.modalTitle,bodyStyle:{paddingBottom:"1px"},footer:null},model:{value:a.actionInfo.modalStatus,callback:function(t){a.$set(a.actionInfo,"modalStatus",t)},expression:"actionInfo.modalStatus"}},[e("a-form",{attrs:{autoFormCreate:function(a){t.form=a}},on:{submit:function(t){return t.preventDefault(),a.handleSubmit(t)}}},[e("a-form-item",{attrs:{label:"姓名",labelCol:{span:3},wrapperCol:{span:21},fieldDecoratorId:"name",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入姓名"}]}}},[e("a-input",{attrs:{placeholder:"姓名"}})],1),e("a-form-item",{attrs:{label:"手机",labelCol:{span:3},wrapperCol:{span:21},fieldDecoratorId:"mobile"}},[e("a-input",{attrs:{placeholder:"手机号码"}})],1),e("a-form-item",{attrs:{label:"邮箱",labelCol:{span:3},wrapperCol:{span:21},fieldDecoratorId:"email"}},[e("a-input",{attrs:{placeholder:"邮箱地址"}})],1),e("a-form-item",{attrs:{label:"描述",labelCol:{span:3},wrapperCol:{span:21},fieldDecoratorId:"description",help:"可选，设置账号的备注信息"}},[e("a-text-area",{attrs:{placeholder:"账号描述"}})],1),e("a-form-item",{attrs:{wrapperCol:{span:21,offset:3}}},[e("div",{staticClass:"action-btn"},[e("a-button",{staticClass:"middle-btn",attrs:{type:"primary",htmlType:"submit",loading:a.actionInfo.confirmLoading}},[a._v("保存")]),e("a-button",{staticClass:"middle-btn",on:{click:function(t){a.actionInfo.modalStatus=!1}}},[a._v("取消")])],1)])],1)],1),e("a-modal",{attrs:{width:800,title:"用户授权",bodyStyle:{paddingBottom:"1px"},footer:null},model:{value:a.authInfo.modalStatus,callback:function(t){a.$set(a.authInfo,"modalStatus",t)},expression:"authInfo.modalStatus"}},[a.currentUser?e("div",{staticStyle:{margin:"0 0 24px 0"}},[e("div",{staticStyle:{"margin-bottom":"24px"}},[e("a-radio-group",{attrs:{buttonStyle:"solid"},model:{value:a.currentUser.authorize,callback:function(t){a.$set(a.currentUser,"authorize",t)},expression:"currentUser.authorize"}},a._l(a.authList,(function(t){return e("a-radio-button",{key:t.value,attrs:{value:t.value}},[a._v(a._s(t.label))])})),1)],1),e("div",{staticClass:"action-btn"},[e("a-button",{staticClass:"middle-btn",attrs:{type:"primary",loading:a.authInfo.confirmLoading},on:{click:a.authApply}},[a._v("保存")]),e("a-button",{staticClass:"middle-btn",on:{click:function(t){a.authInfo.modalStatus=!1}}},[a._v("取消")])],1)]):a._e()])],1)},o=[],i=(n("c5f6"),n("7f7f"),n("ac6a"),n("b558")),r=n("c24f"),c=n("2f14"),u=n("1b80"),s=i["a"].TextArea,l=[{title:"头像",dataIndex:"avatar",width:"30%",scopedSlots:{customRender:"avatar"}},{title:"姓名",dataIndex:"name",width:"15%"},{title:"手机",dataIndex:"mobile",width:"15%"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",scopedSlots:{customRender:"action"}}],d={components:{ATextArea:s},mixins:[u["a"]],data:function(){return{columns:l,dataSource:[],loading:!0,authList:[],newData:{id:0},form:{},currentUser:null,authInfo:{modalStatus:!1,confirmLoading:!1},actionInfo:{modalStatus:!1,confirmLoading:!1,modalTitle:"编辑账号",okText:"保存",cancelText:"放弃"}}},created:function(){this.init()},methods:{init:function(){var t=this;t.loading=!0,Object(r["i"])(t.requestData).then((function(a){t.dataSource=a.data.list,t.pagination.total=a.data.total,t.authList=[],a.data.authList.forEach((function(a){var n={label:a.title,value:a.id};t.authList.push(n)})),t.loading=!1}))},rowClick:function(t,a){var n=this;if(n.newData={id:0},"add"==a||"edit"==a||"new"==a)setTimeout((function(){n.form&&n.form.resetFields()}),0),n.actionInfo.modalStatus=!0,n.actionInfo.modalTitle="添加账号","edit"==a&&setTimeout((function(){n.actionInfo.modalTitle="编辑账号",n.form.setFieldsValue({name:t.name,mobile:t.mobile,email:t.email,description:t.description}),n.newData=t}),0);else if("status"==a){var e=t.status;e?Object(r["g"])(t.code).then((function(a){Object(c["a"])(a)&&(t.status=Number(!e))})):Object(r["k"])(t.code).then((function(a){Object(c["a"])(a)&&(t.status=Number(!e))}))}else"del"==a&&this.$confirm({title:"确定要删除此账号?",content:"删除后不可恢复",okText:"删除",okType:"danger",cancelText:"放弃",onOk:function(){return Object(r["e"])(t.code).then((function(){n.init()})),Promise.resolve()}})},handleSubmit:function(){var t=this;t.form.validateFields((function(a,n){a||t.handleOk()}))},handleOk:function(){var t=this;t.actionInfo.confirmLoading=!0;var a=t.form.getFieldsValue();t.newData.code?a.code=t.newData.code:Object.assign(a,t.newData),Object(r["f"])(a).then((function(n){t.actionInfo.confirmLoading=!1,Object(c["a"])(n)&&(t.newData.code?(t.newData.email=a.email,t.newData.name=a.name,t.newData.mobile=a.mobile,t.newData.description=a.description):t.dataSource.push(n.data),t.form.resetFields(),t.newData={id:0},t.actionInfo.modalStatus=!1)}))},auth:function(t,a){var n=this;n.authInfo.modalStatus=!0,n.currentUser=t,n.currentUser.index=a},authApply:function(){var t=this;t.authInfo.confirmLoading=!0,Object(r["c"])(t.currentUser.id,t.currentUser.authorize).then((function(a){Object(c["a"])(a)&&(t.dataSource[t.currentUser.index]=t.currentUser,t.authInfo.modalStatus=!1,t.authInfo.confirmLoading=!1)}))}}},f=d,p=(n("81f1"),n("2877")),m=Object(p["a"])(f,e,o,!1,null,null,null);a["default"]=m.exports},"81f1":function(t,a,n){"use strict";var e=n("f0ca"),o=n.n(e);o.a},c24f:function(t,a,n){"use strict";n.d(a,"a",(function(){return u})),n.d(a,"j",(function(){return l})),n.d(a,"h",(function(){return d})),n.d(a,"d",(function(){return f})),n.d(a,"i",(function(){return p})),n.d(a,"g",(function(){return m})),n.d(a,"k",(function(){return h})),n.d(a,"f",(function(){return b})),n.d(a,"c",(function(){return g})),n.d(a,"e",(function(){return v})),n.d(a,"b",(function(){return w}));n("96cf"),n("ac6a");var e=n("3b8d"),o=n("22b6"),i=n("a18c"),r=n("4360"),c=n("2f14");function u(t){return s.apply(this,arguments)}function s(){return s=Object(e["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",o["a"].post("project/login",a));case 1:case"end":return t.stop()}}),t)}))),s.apply(this,arguments)}function l(t){return o["a"].post("project/login/register",t)}function d(t){return o["a"].post("project/login/getCaptcha",{mobile:t})}function f(t){var a=t.code;return r["a"].dispatch("setCurrentOrganization",t),o["a"].post("project/index/changeCurrentOrganization",{organizationCode:a}).then((function(t){if(Object(c["a"])(t))return r["a"].dispatch("SET_MENU",t.data.menuList),r["a"].dispatch("SET_USER",t.data.member),r["a"].dispatch("windowLoading",!0),setTimeout((function(){var a=t.data.menuList;if(a){var n=i["a"].options.routes;a.forEach((function(t){n[0].children.push(Object(c["b"])(t)),t.children&&t.children.forEach((function(t){n[0].children.push(Object(c["b"])(t)),t.children&&t.children.forEach((function(t){n[0].children.push(Object(c["b"])(t))}))}))})),i["a"].addRoutes(n),r["a"].dispatch("windowLoading",!1)}}),500),Promise.resolve(t)}))}function p(t){return o["a"].post("project/account",t)}function m(t){return o["a"].post("project/account/forbid",{accountCode:t,status:0})}function h(t){return o["a"].post("project/account/resume",{accountCode:t,status:1})}function b(t){var a="project/account/add";return t.code&&(a="project/account/edit"),o["a"].post(a,t)}function g(t,a){return o["a"].post("project/account/auth",{id:t,auth:a})}function v(t){return o["a"].post("project/account/del",{accountCode:t})}function w(t){return o["a"].post("project/login/_checkBindMail",t)}},f0ca:function(t,a,n){}}]);