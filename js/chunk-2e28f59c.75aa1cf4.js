(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e28f59c","chunk-8e6c018c","chunk-2d0df843"],{"27fc":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"queryDataInfo",(function(){return queryDataInfo})),__webpack_require__.d(__webpack_exports__,"queryWFlowDataInfo",(function(){return queryWFlowDataInfo})),__webpack_require__.d(__webpack_exports__,"handleDataInfo",(function(){return handleDataInfo})),__webpack_require__.d(__webpack_exports__,"initAutoList",(function(){return initAutoList})),__webpack_require__.d(__webpack_exports__,"initQueryInfo",(function(){return initQueryInfo})),__webpack_require__.d(__webpack_exports__,"queryCode",(function(){return queryCode})),__webpack_require__.d(__webpack_exports__,"tipHandleOk",(function(){return tipHandleOk})),__webpack_require__.d(__webpack_exports__,"tipHandleCancel",(function(){return tipHandleCancel})),__webpack_require__.d(__webpack_exports__,"hasBpmStatusFilter",(function(){return hasBpmStatusFilter})),__webpack_require__.d(__webpack_exports__,"modalOk",(function(){return modalOk})),__webpack_require__.d(__webpack_exports__,"processLog",(function(){return processLog})),__webpack_require__.d(__webpack_exports__,"loadData",(function(){return loadData})),__webpack_require__.d(__webpack_exports__,"initComponent",(function(){return initComponent})),__webpack_require__.d(__webpack_exports__,"getQueryParams",(function(){return getQueryParams})),__webpack_require__.d(__webpack_exports__,"handlePrintWF",(function(){return handlePrintWF})),__webpack_require__.d(__webpack_exports__,"handleNotifyWF",(function(){return handleNotifyWF})),__webpack_require__.d(__webpack_exports__,"handleFreeWF",(function(){return handleFreeWF})),__webpack_require__.d(__webpack_exports__,"handleShareWF",(function(){return handleShareWF})),__webpack_require__.d(__webpack_exports__,"handleDetailWF",(function(){return handleDetailWF})),__webpack_require__.d(__webpack_exports__,"handleConfirmWF",(function(){return handleConfirmWF})),__webpack_require__.d(__webpack_exports__,"handleApproveWF",(function(){return handleApproveWF})),__webpack_require__.d(__webpack_exports__,"handleRejectWF",(function(){return handleRejectWF})),__webpack_require__.d(__webpack_exports__,"handleSubmitWF",(function(){return handleSubmitWF})),__webpack_require__.d(__webpack_exports__,"handleCancelWF",(function(){return handleCancelWF})),__webpack_require__.d(__webpack_exports__,"handleExportXls2",(function(){return handleExportXls2})),__webpack_require__.d(__webpack_exports__,"handleExportXls",(function(){return handleExportXls})),__webpack_require__.d(__webpack_exports__,"handleDelete",(function(){return handleDelete})),__webpack_require__.d(__webpack_exports__,"uploadFile",(function(){return uploadFile})),__webpack_require__.d(__webpack_exports__,"viewFile",(function(){return viewFile})),__webpack_require__.d(__webpack_exports__,"handleDelBatch",(function(){return handleDelBatch})),__webpack_require__.d(__webpack_exports__,"getFormatDate",(function(){return getFormatDate})),__webpack_require__.d(__webpack_exports__,"initCgEnhanceJs",(function(){return initCgEnhanceJs})),__webpack_require__.d(__webpack_exports__,"initCgButtonList",(function(){return initCgButtonList})),__webpack_require__.d(__webpack_exports__,"cgButtonJsHandler",(function(){return cgButtonJsHandler})),__webpack_require__.d(__webpack_exports__,"cgButtonActionHandler",(function(){return cgButtonActionHandler})),__webpack_require__.d(__webpack_exports__,"cgButtonLinkHandler",(function(){return cgButtonLinkHandler})),__webpack_require__.d(__webpack_exports__,"initButtonSwitch",(function(){return initButtonSwitch}));var _Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("75fc"),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("c5f6"),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_1__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("456d"),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("2fdb"),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("7514"),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("ac4d"),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("8a81"),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("6762"),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_10__),_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("3b8d");function queryDataInfo(e,t,n,r,a){return _queryDataInfo.apply(this,arguments)}function _queryDataInfo(){return _queryDataInfo=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(t,n,r,a,o){var i,s,c,_,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=a.getStore("cur_user"),e.next=3,queryWFlowDataInfo(t,i,n,r);case 3:return s=e.sent,e.next=6,r.queryTableData("onl_cgform_head",t.code);case 6:if(c=e.sent,_=c.table_name,null!=s){e.next=27;break}return e.prev=9,u=null,e.next=13,r.queryTableDataByParam(_,i["username"],i["realname"],0,1e5,n);case 13:if(u=e.sent,null==u||0!=u.result.total||0!=u.result.records.length){e.next=18;break}return e.next=17,r.getAction("".concat(t.url.getData).concat(t.code),n);case 17:u=e.sent;case 18:return e.next=20,handleDataInfo(t,u,a,o);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](9),console.log(e.t0);case 25:e.next=28;break;case 27:try{Number(s.total)>0?(t.table.pagination.total=Number(s.total),t.table.dataSource=s.records):(t.table.pagination.total=0,t.table.dataSource=[]),t.table.loading=!1}catch(l){console.log(l)}case 28:case"end":return e.stop()}}),e,null,[[9,22]])}))),_queryDataInfo.apply(this,arguments)}function queryWFlowDataInfo(e,t,n,r){return _queryWFlowDataInfo.apply(this,arguments)}function _queryWFlowDataInfo(){return _queryWFlowDataInfo=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=null,i={"0b511f234f3847baa50106a14fff6215":"queryProcessLogToApproved",dae6cc0e7a7f4b7e9dc0fc36757fdc96:"queryProcessLogHisApproved",d11901bc44f24a66b25b37a7a04c611e:"queryProcessLogInfApproved"},s={"流程审批日志表":"queryProcessLogToApproved","流程审批日志历史表":"queryProcessLogHisApproved","流程审批知会表":"queryProcessLogInfApproved"},!Object.keys(i).includes(t.code)||!Object.keys(s).includes(t.description)){e.next=7;break}return e.next=6,a[i[t.code]](n["username"],n["realname"],r);case 6:o=e.sent;case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)}))),_queryWFlowDataInfo.apply(this,arguments)}function handleDataInfo(e,t){return _handleDataInfo.apply(this,arguments)}function _handleDataInfo(){return _handleDataInfo=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=s.length>2&&void 0!==s[2]?s[2]:window.storage,a=s.length>3&&void 0!==s[3]?s[3]:window.tools,n.success?(o=n.result,i=r.getStore("cur_user"),Number(o.total)>0?(t.table.pagination.total=Number(n.result.total),n.result.records=window.__.filter(n.result.records,(function(e){if("leader"in e&&"079c6dd6140c4b269e9bf8601deef901"==t.code){var n=a.deNull(e["members"]).split(","),r=e["leader"]==i["username"]||e["leader"]==i["realname"],o=n.includes(i["username"])||n.includes(i["realname"]);return r=r||o,r}return"create_by"in e&&"bd3d13e4fa5c4b0d91d589cd554397bd"!=t.code?e["create_by"]==i["username"]||e["create_by"]==i["realname"]:"employee"in e&&"bd3d13e4fa5c4b0d91d589cd554397bd"!=t.code?e["employee"]==i["username"]||e["employee"]==i["realname"]:!("proposer"in e&&"933e21cf445440abb8cfdae366082a62"==t.code)||(e["proposer"]==i["username"]||e["proposer"]==i["realname"])})),t.pagination.total=n.result.records.total,t.table.dataSource=n.result.records):(t.table.pagination.total=0,t.table.dataSource=[])):t.$message.warning(n.message),t.table.loading=!1;case 4:case"end":return e.stop()}}),e)}))),_handleDataInfo.apply(this,arguments)}function initAutoList(e,t,n,r){return _initAutoList.apply(this,arguments)}function _initAutoList(){return _initAutoList=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.table.loading=!0,t.$route.params.code?r.isNull(t.code)&&(t.code=t.$route.params.code):t.queryCode(),e.next=4,n.getAction("".concat(t.url.getColumns).concat(t.code));case 4:if(o=e.sent,!o.success){e.next=24;break}for(t.dictOptions=o.result.dictOptions,t.formTemplate=o.result.formTemplate,t.description=o.result.description,t.currentTableName=o.result.currentTableName,t.initCgButtonList(o.result.cgButtonList),t.initCgEnhanceJs(o.result.enhanceJs),t.initButtonSwitch(o.result.hideColumns),i=o.result.columns,s=0;s<i.length;s++)i[s].customRender&&function(){var e=i[s].customRender;i[s].customRender=function(n){return a.filterMultiDictText(t.dictOptions[e],n)}}();return i.push(t.actionColumn),t.table.columns=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__["a"])(i),t.table.columns=window.__.filter(t.table.columns,(function(e){return"content"!=e.dataIndex})),t.hasBpmStatusFilter(),t.loadData(),e.next=22,t.initQueryInfo();case 22:e.next=25;break;case 24:t.$message.warning(o.message);case 25:case"end":return e.stop()}}),e)}))),_initAutoList.apply(this,arguments)}function initQueryInfo(e,t){return _initQueryInfo.apply(this,arguments)}function _initQueryInfo(){return _initQueryInfo=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.getAction("".concat(t.url.getQueryInfo).concat(t.code));case 2:r=e.sent,r.success?t.queryInfo=r.result:t.$message.warning(r.message);case 4:case"end":return e.stop()}}),e)}))),_initQueryInfo.apply(this,arguments)}function queryCode(e){try{e.code=window.location.pathname.split("/")[3]}catch(t){console.error(t)}}function tipHandleOk(e){e.tipConfirmLoading=!0,setTimeout((function(){e.loadData(1),e.tipVisible=!1,e.tipConfirmLoading=!1}),300)}function tipHandleCancel(e){e.loadData(1),e.tipVisible=!1}function hasBpmStatusFilter(e){var t=e.table.columns,n=[],r=!0,a=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;n.push(c.dataIndex)}}catch(_){a=!0,o=_}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}n.includes("bpm_status")||n.includes("BPM_STATUS")?e.hasBpmStatus=!0:e.hasBpmStatus=!1}function modalOk(e){var t=e.modelWFlowSelection;e.fixedWFlow=window.__.find(e.rights,(function(e){return e["id"]=t}));var n=JSON.stringify(e.fixedWFlow);console.log(" 获取流程权责配置 ".concat(t," , fixedWFlow : ").concat(n))}function processLog(e,t,n,r,a){return _processLog.apply(this,arguments)}function _processLog(){return _processLog=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(t,n,r,a,o){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=n.getStore("processlog_by_bs_data_id@".concat(a)),null!=i&&""!=i){e.next=8;break}return e.next=4,r.queryPRLogHistoryByDataID(a);case 4:s=e.sent,s.forEach((function(e){i+="流程名称：".concat(e.process_name," , 流程节点：").concat(e.process_station," , 处理人： ").concat(e.approve_user," , 审批操作：").concat(e.action," <br/>")})),o.processlog_html_info=i,n.setStore("processlog_by_bs_data_id@".concat(a),o,10);case 8:return t.table.dataSource.forEach((function(e){e.id==a&&(e.processlog_html_info=i)})),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)}))),_processLog.apply(this,arguments)}function loadData(e,t,n,r,a,o){return _loadData.apply(this,arguments)}function _loadData(){return _loadData=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(t,n,r,a,o,i){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.table.pagination.current=1==n?1:t.table.pagination.current,s=t.getQueryParams(),e.next=4,r.queryDataInfo(t,s,a,o,i);case 4:case"end":return e.stop()}}),e)}))),_loadData.apply(this,arguments)}function initComponent(e,t){return _initComponent.apply(this,arguments)}function _initComponent(){return _initComponent=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.initAutoList();case 2:return t.queryCode(),t.table.selectionRows=[],t.table.selectedRowKeys=[],e.next=7,n.queryUserName();case 7:case"end":return e.stop()}}),e)}))),_initComponent.apply(this,arguments)}function getQueryParams(e,t,n){var r=Object.assign({},e.queryParam,e.isorter),a=t.getStore("cur_user"),o=["0b511f234f3847baa50106a14fff6215","dae6cc0e7a7f4b7e9dc0fc36757fdc96"];return o.includes(e.code)&&(r.column="operate_time"),n.isNull(r.create_by)&&(r.create_by=a.realname),r.pageNo=e.table.pagination.current,r.pageSize=e.table.pagination.pageSize,n.filterObj(r)}function handlePrintWF(e,t,n){return _handlePrintWF.apply(this,arguments)}function _handlePrintWF(){return _handlePrintWF=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1==t.table.selectionRows.length){e.next=3;break}return t.$message.warning("请选择一条记录！"),e.abrupt("return",!1);case 3:return a=n.getStore("cur_user"),e.next=6,r.queryTableName();case 6:o=e.sent,i=o["table_name"],s=t.table.selectionRows[0],n.setStore("".concat(i,"@id=").concat(s.id),JSON.stringify(s),6e4),c="/workflow/view?table_name=".concat(i,"&id=").concat(s.id,"&user=").concat(a.username,"&type=print"),t.$router.push(c);case 12:case"end":return e.stop()}}),e)}))),_handlePrintWF.apply(this,arguments)}function handleNotifyWF(e,t,n,r){return _handleNotifyWF.apply(this,arguments)}function _handleNotifyWF(){return _handleNotifyWF=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s,c,_,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1==t.table.selectionRows.length){e.next=3;break}return t.$message.warning("请选择一条记录！"),e.abrupt("return",!1);case 3:return o=n.getStore("cur_user"),e.next=6,a.queryTableName();case 6:return i=e.sent,s=i["table_name"],c=t.table.selectionRows[0],e.next=11,a.queryTableDataByField("v_handling_events","id",c.id);case 11:if(_=e.sent,4==c.bpm_status||5==c.bpm_status){e.next=15;break}return t.$message.warning("此记录尚未审批通过，无法进行知会操作！"),e.abrupt("return",!1);case 15:if(!(""!=r.deNull(_)&&_.length>=1)){e.next=18;break}return t.$confirm_({title:"温馨提示",content:"此表单业务已进行了知会操作，请不要重复提交!"}),e.abrupt("return",!0);case 18:n.setStore("".concat(s,"@id=").concat(c.id),JSON.stringify(c),6e4),u="/workflow/view?table_name=".concat(s,"&id=").concat(c.id,"&user=").concat(o.username,"&type=notifying"),t.$router.push(u);case 21:case"end":return e.stop()}}),e)}))),_handleNotifyWF.apply(this,arguments)}function handleFreeWF(e,t,n){return _handleFreeWF.apply(this,arguments)}function _handleFreeWF(){return _handleFreeWF=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1==t.table.selectionRows.length){e.next=3;break}return t.$message.warning("请选择一条记录！"),e.abrupt("return",!1);case 3:return a=n.getStore("cur_user"),e.next=6,r.queryTableName();case 6:if(o=e.sent,i=o["table_name"],s=t.table.selectionRows[0],1==s.bpm_status){e.next=12;break}return t.$message.warning("此记录已进入流程，无法进行自由流程操作！"),e.abrupt("return",!1);case 12:n.setStore("".concat(i,"@id=").concat(s.id),JSON.stringify(s),6e4),c="/workflow/view?table_name=".concat(i,"&id=").concat(s.id,"&user=").concat(a.username,"&type=workflowing"),t.$router.push(c);case 15:case"end":return e.stop()}}),e)}))),_handleFreeWF.apply(this,arguments)}function handleShareWF(e,t,n,r){return _handleShareWF.apply(this,arguments)}function _handleShareWF(){return _handleShareWF=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s,c,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1==t.table.selectionRows.length){e.next=3;break}return t.$message.warning("请选择一条记录！"),e.abrupt("return",!1);case 3:return o=n.getStore("cur_user"),e.next=6,a.queryTableName();case 6:i=e.sent,s=i["table_name"],c=t.table.selectionRows[0],n.setStore("".concat(s,"@id=").concat(c.id),JSON.stringify(c),6e4),_="/basewflow/view?table_name=".concat(s,"&id=").concat(c.id,"&user=").concat(o.username,"&type=view"),setTimeout((function(){window.open(_+"&flag=timeout","_blank")}),500);case 12:case"end":return e.stop()}}),e)}))),_handleShareWF.apply(this,arguments)}function handleDetailWF(e,t,n,r){return _handleDetailWF.apply(this,arguments)}function _handleDetailWF(){return _handleDetailWF=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s,c,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1==t.table.selectionRows.length){e.next=3;break}return t.$message.warning("请选择一条记录！"),e.abrupt("return",!1);case 3:return o=n.getStore("cur_user"),e.next=6,a.queryTableName();case 6:i=e.sent,s=i["table_name"],c=t.table.selectionRows[0],n.setStore("".concat(s,"@id=").concat(c.id),JSON.stringify(c),6e4),_="/workflow/view?table_name=".concat(s,"&id=").concat(c.id,"&user=").concat(o.username),_="0b511f234f3847baa50106a14fff6215"==t.code?"/workflow/view?table_name=".concat(c.table_name,"&id=").concat(c.business_data_id,"&processLogID=").concat(c.id,"&user=").concat(o.username,"&type=workflow"):"d11901bc44f24a66b25b37a7a04c611e"==t.code?"/workflow/view?table_name=".concat(c.table_name,"&id=").concat(c.business_data_id,"&processLogID=").concat(c.id,"&user=").concat(o.username,"&type=notify"):"dae6cc0e7a7f4b7e9dc0fc36757fdc96"==t.code?"/workflow/view?table_name=".concat(c.table_name,"&id=").concat(c.business_data_id,"&processLogID=").concat(c.id,"&user=").concat(o.username,"&type=history"):"".concat(_,"&type=view"),t.$router.push(_);case 13:case"end":return e.stop()}}),e)}))),_handleDetailWF.apply(this,arguments)}function handleConfirmWF(e,t,n,r){return _handleConfirmWF.apply(this,arguments)}function _handleConfirmWF(){return _handleConfirmWF=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s,c,_,u,l,p,d,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=n.getStore("cur_user"),s=r.formatDate((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),c=c||"知会",_=_||"已查看此业务流程，知会确认成功！",u=t.table.selectionRows[0],l=u["id"],p=u["table_name"],1==t.table.selectionRows.length){e.next=10;break}return t.$message.warning("请选择一条记录！"),e.abrupt("return",!1);case 10:return e.next=12,a.queryProcessLogInfByID(p,l);case 12:if(u=e.sent,u["create_time"]=s,!(r.deNull(u["approve_user"]).length>=r.deNull(u["employee"]).length)){e.next=24;break}return e.next=17,a.postProcessLogHistory(u);case 17:return o=e.sent,e.next=20,a.deleteProcessLogInf(p,[u]);case 20:return o=e.sent,t.tipVisible=!0,t.tipContent="知会确认成功！",e.abrupt("return",!0);case 24:if(d=","+r.deNull(u["employee"])+",",m=","+r.deNull(u["approve_user"])+",",d.includes(","+i["username"]+",")||d.includes(","+i["realname"]+",")){e.next=29;break}return t.$message.warning("您不在此知会记录的操作职员列中，无法进行确认操作！"),e.abrupt("return",!1);case 29:if(!m.includes(","+i["username"]+",")&&!m.includes(","+i["realname"]+",")){e.next=32;break}return t.$message.warning("您已经在此知会记录中，执行过确认操作了！"),e.abrupt("return",!1);case 32:return u["approve_user"]=r.deNull(u["approve_user"])+(""==r.deNull(u["approve_user"])?"":",")+i["username"],u["action"]=c,u["operate_time"]=s,u["action_opinion"]=r.deNull(u["action_opinion"])+(""==r.deNull(u["action_opinion"])?"":"\n\r")+"".concat(i["username"],":").concat(_),e.next=38,a.patchTableData("PR_LOG_INFORMED",u["id"],u);case 38:if(!(u["approve_user"].length>=u["employee"].length)){e.next=45;break}return e.next=41,a.postProcessLogHistory(u);case 41:return o=e.sent,e.next=44,a.deleteProcessLogInf(p,[u]);case 44:o=e.sent;case 45:return t.tipVisible=!0,t.tipContent="知会确认成功！",t.loadData(),e.abrupt("return",o);case 49:case"end":return e.stop()}}),e)}))),_handleConfirmWF.apply(this,arguments)}function handleApproveWF(e,t,n,r){return _handleApproveWF.apply(this,arguments)}function _handleApproveWF(){return _handleApproveWF=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s,c,_,u,l,p,d,m,f,b,h,g,w,y,x,k,v,D,O,R,W,S,E,F,C,P,L,q,I;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=n.getStore("cur_user"),s=r.formatDate((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),c=c||"同意",_=_||"",u=t.table.selectionRows[0],l=u["id"],p=u["business_data_id"],d=u["table_name"],m=u["process_audit"],f=null,1==t.table.selectionRows.length){e.next=13;break}return t.$message.warning("请选择一条记录！"),e.abrupt("return",!1);case 13:return e.next=15,a.queryProcessLogByID(d,l);case 15:if(u=e.sent,u["employee"].includes(i["username"])||u["employee"].includes(i["realname"])){e.next=19;break}return t.$message.warning("您不在此审批流程记录的操作职员列中，无法进行审批操作！"),e.abrupt("return",!1);case 19:return e.next=21,a.queryProcessLog(d,p);case 21:return b=e.sent,window.__.each(b,(function(e){var t=e["create_time"];e["approve_user"]=i["username"],e["action"]=c,e["operate_time"]=s,e["action_opinion"]=_,e["create_time"]=r.formatDate(t,"yyyy-MM-dd hh:mm:ss")})),e.next=25,a.postProcessLogHistory(b);case 25:return o=e.sent,e.next=28,a.deleteProcessLog(d,b);case 28:return o=e.sent,e.next=31,a.queryBusinessInfo(d);case 31:if(h=e.sent,t.fixedWFlow=h[0],t.rights=h,!(h.length>1&&"000000000"!=u.business_code)){e.next=38;break}t.modelModal=!0,e.next=154;break;case 38:if(!(h.length<=0&&"000000000"!=u.business_code)){e.next=44;break}return t.tipVisible=!0,t.tipContent="未获取到此业务的流程权责，无法同意审批！",e.abrupt("return",!1);case 44:if(g="",w="",y=m,x=""==r.deNull(w)?"":w.split(","),"000000000"==u.business_code){e.next=63;break}e.prev=49,g=","+t.fixedWFlow["audit"]+","+t.fixedWFlow["approve"]+",",w=t.fixedWFlow["notify"],f=t.fixedWFlow["approve"],e.next=61;break;case 55:return e.prev=55,e.t0=e["catch"](49),t.tipVisible=!0,t.tipContent="固化流程设置节点失败，无法进行审批操作！",console.log("固化流程设置节点失败 :"+e.t0),e.abrupt("return",!1);case 61:e.next=77;break;case 63:e.prev=63,k=JSON.parse(u.business_data),g=","+k.audit_node+","+k.approve_node+",",x=""==r.deNull(k.notify_node)?[]:[k.notify_node],y=u["employee"],f=k.approve_node,e.next=77;break;case 71:return e.prev=71,e.t1=e["catch"](63),t.tipVisible=!0,t.tipContent="自由流程设置节点失败，无法进行审批操作！",console.log("自由流程设置节点失败 :"+e.t1),e.abrupt("return",!1);case 77:if(v=g.split(","+y+","),D=v[1],""!=D){e.next=121;break}return e.next=82,a.patchTableData(d,u["business_data_id"],{bpm_status:"4"});case 82:o=e.sent,O=!0,R=!1,W=void 0,e.prev=86,S=x[Symbol.iterator]();case 88:if(O=(E=S.next()).done){e.next=104;break}return F=E.value,e.next=92,a.queryProcessNodeEmployee(F);case 92:return C=e.sent,e.next=95,a.queryProcessNodeProcName(F);case 95:return P=e.sent,L={},L="000000000"!=u.business_code?{id:a.queryRandomStr(32),table_name:d,main_value:u["main_value"],business_data_id:u["business_data_id"],business_code:t.fixedWFlow["id"],process_name:t.fixedWFlow["items"],employee:C[0]["employee"],process_station:P[0]["item_text"],process_audit:F,operate_time:s,create_time:s,proponents:u["proponents"],content:u["content"],business_data:JSON.stringify(u)}:{id:a.queryRandomStr(32),table_name:d,main_value:u["business_data_id"],business_data_id:u["business_data_id"],business_code:"000000001",process_name:"自由流程知会",employee:F,process_station:"自由流程知会",process_audit:"000000001",proponents:u["proponents"],content:u["content"],operate_time:s,create_time:s,business_data:u.business_data},e.next=100,a.postProcessLogInformed(L);case 100:o=e.sent;case 101:O=!0,e.next=88;break;case 104:e.next=110;break;case 106:e.prev=106,e.t2=e["catch"](86),R=!0,W=e.t2;case 110:e.prev=110,e.prev=111,O||null==S.return||S.return();case 113:if(e.prev=113,!R){e.next=116;break}throw W;case 116:return e.finish(113);case 117:return e.finish(110);case 118:t.tipContent="同意审批成功，审批流程处理完毕！",e.next=153;break;case 121:return D=0==D.indexOf(",")?D.substring(1):D,D=D.split(",")[0],q="2",f==D&&(q="3"),e.next=127,a.patchTableData(d,u["business_data_id"],{bpm_status:q});case 127:if(o=e.sent,L={},"000000000"==u.business_code){e.next=139;break}return e.next=132,a.queryProcessNodeEmployee(D);case 132:return C=e.sent,e.next=135,a.queryProcessNodeProcName(D);case 135:P=e.sent,L={id:a.queryRandomStr(32),table_name:d,main_value:u["main_value"],business_data_id:u["business_data_id"],business_code:t.fixedWFlow["id"],process_name:t.fixedWFlow["items"],employee:C[0]["employee"],process_station:P[0]["item_text"],process_audit:D,proponents:u["proponents"],content:u["content"],create_time:s,business_data:u.business_data},e.next=140;break;case 139:L={id:a.queryRandomStr(32),table_name:d,main_value:u["business_data_id"],business_data_id:u["business_data_id"],business_code:"000000000",process_name:"自由流程审批",employee:D,process_station:"自由流程审批",process_audit:"000000000",proponents:u["proponents"],content:u["content"],operate_time:s,create_time:s,business_data:u.business_data};case 140:return e.next=142,a.queryApprovalLength(d,u["business_data_id"]);case 142:if(I=e.sent,0!=I){e.next=147;break}t.tipContent="处理异常，请稍后重试；如果多次处理异常，可能需要撤销当前审批，重新发起审批流程！异常流程数据[status:".concat(I,"]"),e.next=153;break;case 147:return e.next=149,a.postProcessLog(L);case 149:o=e.sent,console.log(" 修改当前记录审批状态为处理中返回结果:"+JSON.stringify(o)),t.table.dataSource.push(L),t.tipContent="同意审批成功，审批流程已推向后续处理人！";case 153:t.tipVisible=!0;case 154:return t.loadData(),console.log("同意审批成功！"),e.abrupt("return","");case 157:case"end":return e.stop()}}),e,null,[[49,55],[63,71],[86,106,110,118],[111,,113,117]])}))),_handleApproveWF.apply(this,arguments)}function handleRejectWF(e,t,n,r){return _handleRejectWF.apply(this,arguments)}function _handleRejectWF(){return _handleRejectWF=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s,c,_,u,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=n.getStore("cur_user"),s=r.formatDate((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),c=c||"驳回",_=_||"",u=t.table.selectionRows[0],1==t.table.selectionRows.length){e.next=8;break}return t.$message.warning("请选择一条记录！"),e.abrupt("return",!1);case 8:if(l=u["table_name"],u["employee"].includes(i["username"])||u["employee"].includes(i["realname"])){e.next=12;break}return t.$message.warning("您不在此审批流程记录的操作职员列中，无法进行驳回操作！"),e.abrupt("return",!1);case 12:return e.next=14,a.queryProcessLogByID(l,u["id"]);case 14:return u=e.sent,e.next=17,a.queryProcessLog(l,u["business_data_id"]);case 17:return p=e.sent,window.__.each(p,(function(e){e["approve_user"]=i["username"],e["action"]=c,e["operate_time"]=s,e["action_opinion"]=_})),e.next=21,a.postProcessLogHistory(p);case 21:return o=e.sent,e.next=24,a.deleteProcessLog(l,p);case 24:return o=e.sent,e.next=27,a.patchTableData(l,u["business_data_id"],{bpm_status:"1"});case 27:return o=e.sent,e.next=30,a.patchTableData(l,u["business_data_id"],{bpm_status:"1"});case 30:return o=e.sent,t.tipVisible=!0,t.tipContent="驳回审批成功！",t.loadData(),console.log("驳回审批成功"),e.abrupt("return",o);case 36:case"end":return e.stop()}}),e)}))),_handleRejectWF.apply(this,arguments)}function handleSubmitWF(e,t,n,r){return _handleSubmitWF.apply(this,arguments)}function _handleSubmitWF(){return _handleSubmitWF=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s,c,_,u,l,p,d,m,f,b,h,g,w,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o={},i=n.formatDate((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),1==t.table.selectionRows.length){e.next=5;break}return t.$message.warning("请选择一条记录！"),e.abrupt("return",!1);case 5:return s=t.table.selectedRowKeys[0],c=t.table.selectionRows[0],e.next=9,a.queryExistWorkflow(c.id);case 9:if(_=e.sent,console.log("index: "+s),"2"!=c["bpm_status"]&&"3"!=c["bpm_status"]&&("undefined"==typeof _||null==_)){e.next=17;break}return t.tipVisible=!0,t.tipContent="待审记录中，已经存在此记录，无法再次提交审批！",e.abrupt("return",!1);case 17:if("4"!=c["bpm_status"]&&"5"!=c["bpm_status"]){e.next=23;break}return t.tipVisible=!0,t.tipContent="此记录的审批流程，已经完成审批，无法再次提交审批！",e.abrupt("return",!1);case 23:if("10"!=c["bpm_status"]){e.next=27;break}return t.tipVisible=!0,t.tipContent="此记录的审批流程，已经作废，无法再次提交审批！",e.abrupt("return",!1);case 27:return u=r.getStore("cur_user"),e.next=30,a.queryTableName();case 30:return l=e.sent,p=l["table_name"],console.log(" tableName : "+l["table_name"]+" 执行提交审批操作"),e.next=35,a.queryBusinessInfo(p);case 35:if(d=e.sent,t.fixedWFlow=d[0],t.rights=d,!(d.length>1)){e.next=43;break}return t.modelModal=!0,e.abrupt("return",!1);case 43:if(!(d.length<=0)){e.next=49;break}return t.tipVisible=!0,t.tipContent="尚未配置此业务的流程权责，无法提交审批！",e.abrupt("return",!1);case 49:return m=t.fixedWFlow["audit"].split(",")[0],e.next=52,a.queryProcessNodeEmployee(m);case 52:return f=e.sent,e.next=55,a.queryProcessNodeProcName(m);case 55:if(b=e.sent,!Array.isArray(f)||0!=f.length){e.next=59;break}return this.$notification["error"]({message:"温馨提示",description:"没有获取到审核节点的用户信息，请在流程设计->节点配置中设置审核节点的审核用户！",duration:4}),e.abrupt("return",!1);case 59:return h={id:a.queryRandomStr(32),table_name:p,main_value:l["id"],business_data_id:c["id"],business_code:t.fixedWFlow["id"],process_name:t.fixedWFlow["items"],employee:f[0]["employee"],process_station:b[0]["item_text"],process_audit:m,proponents:u["realname"],content:c["content"],create_time:i,business_data:JSON.stringify(c)},e.next=62,a.queryApprovalExist(p,c["id"]);case 62:if(g=e.sent,!g){e.next=67;break}t.tipContent="待审记录中，已经存在此记录，无法再次提交审批！",e.next=85;break;case 67:return w={id:a.queryRandomStr(32),table_name:p,main_value:l["id"],business_data_id:c["id"],business_code:t.fixedWFlow["id"],process_name:t.fixedWFlow["items"],employee:u["username"],process_station:b[0]["item_text"],process_audit:"000000003",proponents:u["username"],approve_user:u["username"],action:"发起",action_opinion:"发起固化流程",content:c["content"],operate_time:i,create_time:i,business_data:JSON.stringify(c)},e.next=70,a.postProcessLogHistory(w);case 70:return o=e.sent,e.next=73,a.postProcessLog(h);case 73:return o=e.sent,console.log(" 提交审批返回结果: "+JSON.stringify(o)),e.next=77,a.patchTableData(p,c["id"],{bpm_status:"2"});case 77:return o=e.sent,e.next=80,a.patchTableData(p,c["id"],{bpm_status:"2"});case 80:o=e.sent,c["bpm_status"]="2",y=" 修改当前记录审批状态为处理中返回结果:"+JSON.stringify(o),console.log(y),t.tipContent="提交审批成功！";case 85:return t.tipVisible=!0,t.loadData(),console.log(" tableName : "+p+" \n rights : "+JSON.stringify(d)),e.abrupt("return",!0);case 89:case"end":return e.stop()}}),e,this)}))),_handleSubmitWF.apply(this,arguments)}function handleCancelWF(e,t,n,r,a){return _handleCancelWF.apply(this,arguments)}function _handleCancelWF(){return _handleCancelWF=Object(_Users_yunwisdom_Workspace_oa_front_service_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(t,n,r,a,o){var i,s,c,_,u,l,p,d,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=n.getStore("cur_user"),c=r.formatDate((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),_="撤销",u="撤销审批",l=t.table.selectionRows[0],1==t.table.selectionRows.length){e.next=8;break}return t.$message.warning("请选择一条记录！"),e.abrupt("return",!1);case 8:return e.next=10,a.queryTableName();case 10:if(p=e.sent,d=p["table_name"],"1"!=l["bpm_status"]){e.next=17;break}t.tipVisible=!0,t.tipContent="该记录尚未提交审批！",e.next=27;break;case 17:if("4"!=l["bpm_status"]&&"5"!=l["bpm_status"]){e.next=23;break}return t.tipVisible=!0,t.tipContent="该记录已完成审批，无法撤销审批！",e.abrupt("return",!1);case 23:if("10"!=l["bpm_status"]){e.next=27;break}return t.tipVisible=!0,t.tipContent="该记录审批流程已作废，无法撤销审批！",e.abrupt("return",!1);case 27:return e.next=29,a.queryProcessLog(d,l["id"]);case 29:return m=e.sent,window.__.each(m,(function(e){var t=e["create_time"];e["approve_user"]=s["username"],e["action"]=_,e["operate_time"]=c,e["action_opinion"]=u,e["create_time"]=r.formatDate(t,"yyyy-MM-dd hh:mm:ss")})),o.postWorkflowCancel(d,l,m),l["bpm_status"]="1",t.tipVisible=!0,t.tipContent="撤销审批成功！",t.loadData(),e.abrupt("return",i);case 37:case"end":return e.stop()}}),e)}))),_handleCancelWF.apply(this,arguments)}function handleExportXls2(e){var t=e.queryParam;if(e.table.selectionRows.length<=0)return e.$message.warning("请选择需要导出的记录！"),!1;e.table.selectedRowKeys&&e.table.selectedRowKeys.length>0&&(t["selections"]=e.table.selectedRowKeys.join(","));var n=encodeURI(JSON.stringify(t));console.log("paramsStr: "+n);var r=window._CONFIG["domainURL"]+e.url.exportXls+e.code+"?paramsStr="+n;window.location.href=r}function handleExportXls(e,t,n,r){var a=this,o=e.queryParam,i=t.getStore("cur_user");if(e.table.selectionRows.length<=0)return e.$message.warning("请选择需要导出的记录！"),!1;e.table.selectedRowKeys&&e.table.selectedRowKeys.length>0&&(o["selections"]=e.table.selectedRowKeys.join(","));var s=JSON.stringify(n.filterObj(o));r.downFile(e.url.exportXls+e.code,{paramsStr:s}).then((function(t){if(t)if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([t]),"".concat(e.description,"_").concat(i.realname,".xls"));else{var n=window.URL.createObjectURL(new Blob([t])),r=document.createElement("a");r.style.display="none",r.href=n,r.setAttribute("download","".concat(a.description,"_").concat(i.realname,".xls")),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)}else e.$message.warning("文件下载失败")})),console.log("导出参数",o)}function handleDelete(e,t,n){n.deleteAction(e.url.optPre+e.code+"/"+t).then((function(t){t.success?(e.$message.success(t.message),e.loadData()):e.$message.warning(t.message)}))}function uploadFile(e,t){t?window.open(window._CONFIG["downloadURL"]+"/"+e.queryFirstFile(t)):e.$message.warning("未知的文件")}function viewFile(e,t){if(t){t=e.queryFirstFile(t);var n="https://view.officeapps.live.com/op/view.aspx?src=",r=window._CONFIG["viewURL"],a=window._CONFIG["downloadURL"]+"/"+t,o=encodeURIComponent(a),i=t.substring(t.lastIndexOf("."),t.length).toLowerCase();a=i.includes("doc")||i.includes("ppt")||i.includes("xls")?n+o:r+a,i.includes("pdf"),a=a,window.open(a)}else e.$message.warning("未知的文件")}function handleDelBatch(e){if(1!=e.table.selectedRowKeys.length)return e.$message.warning("请选择一条记录！"),!1;var t="",n=e.table.selectionRows[0];if("1"!=n["bpm_status"])return e.$message.warning("当前记录已经进入流程，无法删除！"),!1;e.table.selectedRowKeys.forEach((function(e){t+=e+","})),e.$confirm_({title:"确认删除",content:"是否删除选中数据?",onOk:function(){e.handleDelete(t),e.onClearSelected()}})}function getFormatDate(e){if(e){var t=e;return t.length>10&&(t=t.substring(0,10)),t}return""}function initCgEnhanceJs(enhanceJs,that,manageAPI){if(enhanceJs){var Obj=eval("("+enhanceJs+")");that.EnhanceJS=new Obj(manageAPI.getAction,manageAPI.postAction,manageAPI.deleteAction),that.cgButtonJsHandler("created")}else that.EnhanceJS=""}function initCgButtonList(e,t){var n=[],r=[];if(e&&e.length>0)for(var a=0;a<e.length;a++){var o=e[a];"button"==o.buttonStyle?r.push(o):"link"==o.buttonStyle&&n.push(o)}t.cgButtonLinkList=[].concat(n),t.cgButtonList=[].concat(r)}function cgButtonJsHandler(e,t){t.EnhanceJS[e]&&t.EnhanceJS[e](t)}function cgButtonActionHandler(e,t,n){if(!t.table.selectedRowKeys||0==t.table.selectedRowKeys.length)return t.$message.warning("请先选中一条记录"),!1;if(t.table.selectedRowKeys.length>1)return t.$message.warning("请只选中一条记录"),!1;var r={formId:t.code,buttonCode:e,dataId:t.table.selectedRowKeys[0]};console.log("自定义按钮请求后台参数：",r),n.postAction(t.url.buttonAction,r).then((function(e){e.success?(t.loadData(),t.$message.success("处理完成!")):t.$message.warning("处理失败!")}))}function cgButtonLinkHandler(e,t,n,r,a){if("js"==n)r.EnhanceJS[t]&&r.EnhanceJS[t](r,e);else if("action"==n){var o={formId:r.code,buttonCode:t,dataId:e.id};console.log("自定义按钮link请求后台参数：",o),a.postAction(r.url.buttonAction,o).then((function(e){e.success?(r.loadData(),r.$message.success("处理完成!")):r.$message.warning("处理失败!")}))}}function initButtonSwitch(e,t){e&&e.length>0&&Object.keys(t.buttonSwitch).forEach((function(n){e.indexOf(n)>=0&&(t.buttonSwitch[n]=!1)}))}},"7c93":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:"导入EXCEL",width:600,visible:e.visible,confirmLoading:e.uploading},on:{cancel:e.handleClose}},[n("a-upload",{attrs:{name:"file",multiple:!0,accept:".xls,.xlsx",fileList:e.fileList,remove:e.handleRemove,beforeUpload:e.beforeUpload}},[n("a-button",[n("a-icon",{attrs:{type:"upload"}}),e._v("\n      选择导入文件\n    ")],1)],1),n("template",{slot:"footer"},[n("a-button",{on:{click:e.handleClose}},[e._v("关闭")]),n("a-button",{attrs:{type:"primary",disabled:0===e.fileList.length,loading:e.uploading},on:{click:e.handleImport}},[e._v("\n      "+e._s(e.uploading?"上传中...":"开始上传")+"\n    ")])],1)],2)},a=[],o=(n("ac6a"),n("75fc")),i=n("0fea"),s={name:"JImportModal",props:{url:{type:String,default:"",required:!1},biz:{type:String,default:"",required:!1}},data:function(){return{visible:!1,uploading:!1,fileList:[],uploadAction:"",foreignKeys:""}},watch:{url:function(e){e&&(this.uploadAction=window._CONFIG["domianURL"]+e)}},created:function(){this.uploadAction=window._CONFIG["domianURL"]+this.url},methods:{handleClose:function(){this.visible=!1},show:function(e){this.fileList=[],this.uploading=!1,this.visible=!0,this.foreignKeys=e},handleRemove:function(e){var t=this.fileList.indexOf(e),n=this.fileList.slice();n.splice(t,1),this.fileList=n},beforeUpload:function(e){return this.fileList=[].concat(Object(o["a"])(this.fileList),[e]),!1},handleImport:function(){var e=this,t=this.fileList,n=new FormData;this.biz&&n.append("isSingleTableImport",this.biz),this.foreignKeys&&this.foreignKeys.length>0&&n.append("foreignKeys",this.foreignKeys),t.forEach((function(e){n.append("files[]",e)})),this.uploading=!0,Object(i["postAction"])(this.uploadAction,n).then((function(t){e.uploading=!1,t.success?(e.$message.success(t.message),e.visible=!1,e.$emit("ok")):e.$message.warning(t.message)}))}}},c=s,_=n("2877"),u=Object(_["a"])(c,r,a,!1,null,"495e2a21",null);t["default"]=u.exports},"89f2":function(e,t,n){"use strict";n.r(t),n.d(t,"initDictOptions",(function(){return i})),n.d(t,"filterDictText",(function(){return c})),n.d(t,"filterMultiDictText",(function(){return _})),n.d(t,"ajaxFilterDictText",(function(){return u}));n("96cf"),n("28a5"),n("6b54"),n("ac4d"),n("8a81"),n("ac6a");var r=n("3b8d"),a=n("4ec3"),o=n("0fea");function i(e){return s.apply(this,arguments)}function s(){return s=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return","字典Code不能为空!");case 2:return e.next=4,Object(a["f"])(t);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function c(e,t){if(e instanceof Array){var n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;if(t===s.value)return s.text}}catch(c){r=!0,a=c}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}}return t}function _(e,t){if(0===t||"0"===t){var n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;if(t==s.value)return s.text}}catch(u){r=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}}if(!t||!e||0==e.length)return"";var c="";t=t.toString();var _=t.split(",");return e.forEach((function(e){for(var t=0;t<_.length;t++)if(_[t]===e.value){c+=e.text+",";break}})),""==c?t:c.substring(0,c.length-1)}function u(e,t){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return","字典Code不能为空!");case 2:if(n){e.next=4;break}return e.abrupt("return","");case 4:return e.next=6,Object(o["getAction"])("/sys/dict/getDictText/".concat(t,"/").concat(n));case 6:if(r=e.sent,!r.success){e.next=11;break}return e.abrupt("return",r.result);case 11:return e.abrupt("return","");case 12:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}},9937:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticStyle:{height:"100%"},attrs:{bordered:!1}},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline"}},[e.queryInfo&&e.queryInfo.length>0?n("a-row",{attrs:{gutter:24}},[e._l(e.queryInfo,(function(t,r){return["1"===t.hidden?["datetime"==t.view?n("a-col",{directives:[{name:"show",rawName:"v-show",value:e.toggleSearchStatus,expression:"toggleSearchStatus"}],key:"query"+r,attrs:{md:12,sm:16}},[n("online-query-form-item",{attrs:{queryParam:e.queryParam,item:t,dictOptions:e.dictOptions}})],1):n("a-col",{directives:[{name:"show",rawName:"v-show",value:e.toggleSearchStatus,expression:"toggleSearchStatus"}],key:"query"+r,attrs:{md:6,sm:8}},[n("online-query-form-item",{attrs:{queryParam:e.queryParam,item:t,dictOptions:e.dictOptions}})],1)]:["datetime"==t.view?n("a-col",{key:"query"+r,attrs:{md:12,sm:16}},[n("online-query-form-item",{attrs:{queryParam:e.queryParam,item:t,dictOptions:e.dictOptions}})],1):n("a-col",{key:"query"+r,attrs:{md:6,sm:8}},[n("online-query-form-item",{attrs:{queryParam:e.queryParam,item:t,dictOptions:e.dictOptions}})],1)]]})),n("a-col",{attrs:{md:6,sm:8}},[n("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[n("a-button",{staticStyle:{"margin-left":"0px","font-size":"12px",height:"28px",padding:"0 10px"},attrs:{type:"primary",icon:"search"},on:{click:e.searchByquery}},[e._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px","font-size":"12px",height:"28px",padding:"0 10px"},attrs:{type:"primary",icon:"reload"},on:{click:e.searchReset}},[e._v("重置")]),n("a",{staticStyle:{"margin-left":"8px","font-size":"12px",height:"28px",padding:"0 10px"},on:{click:e.handleToggleSearch}},[e._v("\n              "+e._s(e.toggleSearchStatus?"收起":"展开")+"\n              "),n("a-icon",{attrs:{type:e.toggleSearchStatus?"up":"down"}})],1)],1)])],2):e._e()],1)],1),n("div",{staticClass:"table-operator"},[e.buttonSwitch.add?n("a-button",{staticStyle:{"margin-left":"0px","font-size":"12px",height:"28px",padding:"0 10px"},attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")]):e._e(),n("a-button",{staticStyle:{"margin-left":"6px","font-size":"12px",height:"28px",padding:"0 10px"},attrs:{type:"primary",icon:"book"},on:{click:e.handleDetailWF}},[e._v("详情")]),e.buttonSwitch.import?n("a-button",{staticStyle:{"margin-left":"6px","font-size":"12px",height:"28px",padding:"0 10px"},attrs:{type:"primary",icon:"upload"},on:{click:e.handleImportXls}},[e._v("导入")]):e._e(),e.buttonSwitch.export?n("a-button",{staticStyle:{"margin-left":"6px","font-size":"12px",height:"28px",padding:"0 10px"},attrs:{type:"primary",icon:"download"},on:{click:e.handleExportXls}},[e._v("导出")]):e._e(),e.hasBpmStatus?[n("a-button",{staticStyle:{"margin-left":"6px","font-size":"12px",height:"28px",padding:"0 10px"},attrs:{type:"primary",icon:"share-alt"},on:{click:e.handleFreeWF}},[e._v("自由流")]),n("a-button",{staticStyle:{"margin-left":"6px","font-size":"12px",height:"28px",padding:"0 10px",display:"none"},attrs:{type:"primary",icon:"cloud-upload"},on:{click:e.handleSubmitWF}},[e._v("提交")]),n("a-button",{staticStyle:{"margin-left":"6px","font-size":"12px",height:"28px",padding:"0 10px"},attrs:{type:"primary",icon:"cloud-download"},on:{click:e.handleCancelWF}},[e._v("撤销")]),n("a-button",{staticStyle:{"margin-left":"6px","font-size":"12px",height:"28px",padding:"0 10px"},attrs:{type:"primary",icon:"sound"},on:{click:e.handleNotifyWF}},[e._v("知会")]),n("a-button",{staticStyle:{"margin-left":"6px","font-size":"12px",height:"28px",padding:"0 10px"},attrs:{type:"primary",icon:"printer"},on:{click:e.handlePrintWF}},[e._v("打印")]),n("a-button",{staticStyle:{"margin-left":"6px","font-size":"12px",height:"28px",padding:"0 10px"},attrs:{type:"primary",icon:"star"},on:{click:e.handleCollection}},[e._v("收藏")]),n("a-button",{staticStyle:{"margin-left":"6px","font-size":"12px",height:"28px",padding:"0 10px"},attrs:{type:"primary",icon:"compass"},on:{click:e.handleShareWF}},[e._v("分享")])]:e._e(),"0b511f234f3847baa50106a14fff6215"==e.code?void 0:e._e(),"d11901bc44f24a66b25b37a7a04c611e"==e.code?void 0:e._e(),e._l(e.cgButtonList,(function(t,r){return e.cgButtonList&&e.cgButtonList.length>0?["js"==t.optType?n("a-button",{key:"cgbtn"+r,staticStyle:{"margin-left":"6px","font-size":"12px",height:"28px",padding:"0 10px"},attrs:{type:"primary",icon:t.buttonIcon},on:{click:function(n){return e.cgButtonJsHandler(t.buttonCode)}}},[e._v(e._s(t.buttonName))]):"action"==t.optType?n("a-button",{key:"cgbtn"+r,staticStyle:{"margin-left":"6px","font-size":"12px",height:"28px",padding:"0 10px"},attrs:{type:"primary",icon:t.buttonIcon},on:{click:function(n){return e.cgButtonActionHandler(t.buttonCode)}}},[e._v(e._s(t.buttonName))]):e._e()]:e._e()})),e.buttonSwitch.batch_delete?n("a-button",{directives:[{name:"show",rawName:"v-show",value:e.table.selectionRows.length>0&&"0b511f234f3847baa50106a14fff6215"!=e.code&&"dae6cc0e7a7f4b7e9dc0fc36757fdc96"!=e.code&&"d11901bc44f24a66b25b37a7a04c611e"!=e.code,expression:"\n        table.selectionRows.length > 0 &&\n          code != '0b511f234f3847baa50106a14fff6215' &&\n          code != 'dae6cc0e7a7f4b7e9dc0fc36757fdc96' &&\n          code != 'd11901bc44f24a66b25b37a7a04c611e'\n      "}],staticStyle:{"margin-left":"6px","font-size":"12px",height:"28px",padding:"0 10px"},attrs:{ghost:"",type:"primary",icon:"delete"},on:{click:e.handleDelBatch}},[e._v("删除")]):e._e()],2),n("div",[n("div",{staticClass:"ant-alert ant-alert-info",staticStyle:{"margin-bottom":"16px"}},[n("i",{staticClass:"anticon anticon-info-circle ant-alert-icon"}),e._v("\n      已选择 \n      "),n("a",{staticStyle:{"font-weight":"600"}},[e._v(e._s(e.table.selectedRowKeys.length))]),e._v("项  \n      "),n("a",{staticStyle:{"margin-left":"24px"},on:{click:e.onClearSelected}},[e._v("清空")])]),n("a-table",{ref:"cgformAutoList",staticStyle:{"min-height":"300px"},attrs:{bordered:"",size:"middle",rowKey:"id",columns:e.table.columns,dataSource:e.table.dataSource,pagination:e.pagination,loading:e.table.loading,rowSelection:{selectedRowKeys:e.table.selectedRowKeys,onChange:e.handleChangeInTableSelect}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"dateSlot",fn:function(t){return[n("span",[e._v(e._s(e.getFormatDate(t)))])]}},{key:"htmlSlot",fn:function(t){return[n("div",{domProps:{innerHTML:e._s(t)}})]}},{key:"imgSlot",fn:function(t){return[t?n("img",{staticStyle:{"max-width":"80px","font-size":"12px","font-style":"italic"},attrs:{src:e.getImgView(t),height:"25px",alt:"图片不存在"}}):n("span",{staticStyle:{"font-size":"12px","font-style":"italic"}},[e._v("无此图片")])]}},{key:"fileSlot",fn:function(t){return[t?n("span",[n("a-button",{staticStyle:{transform:"scale(0.65,0.65)","margin-left":"-5px","margin-right":"-5px"},attrs:{type:"primary",size:"small"},on:{click:function(n){return e.uploadFile(t)}}},[e._v("下载")]),n("a-button",{staticStyle:{transform:"scale(0.65,0.65)","margin-left":"-5px","margin-right":"-5px"},attrs:{type:"primary",size:"small"},on:{click:function(n){return e.viewFile(t)}}},[e._v("预览")])],1):n("span",{staticStyle:{"font-size":"12px","font-style":"italic"}},[e._v("无此文件")])]}},{key:"action",fn:function(t,r){return n("span",{},["dae6cc0e7a7f4b7e9dc0fc36757fdc96"!=e.code&&"0b511f234f3847baa50106a14fff6215"!=e.code&&"d11901bc44f24a66b25b37a7a04c611e"!=e.code?[n("a-dropdown",[n("a",{staticClass:"ant-dropdown-link"},[e._v("\n              操作\n              "),n("a-icon",{attrs:{type:"down"}})],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e.hasBpmStatus?["1"==r.bpm_status||""==r.bpm_status||null==r.bpm_status?[e.buttonSwitch.update?[n("a-menu-item",[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")])])]:e._e()]:e._e()]:[e.buttonSwitch.update?[n("a-menu-item",[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")])])]:e._e()],e.hasBpmStatus?void 0:[e.buttonSwitch.delete?n("a-menu-item",[n("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDeleteOne(r)}}},[n("a",[e._v("删除")])])],1):e._e()],e._l(e.cgButtonLinkList,(function(t,a){return e.cgButtonLinkList&&e.cgButtonLinkList.length>0?[n("a-menu-item",{key:"cgbtnLink"+a},[n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(n){return e.cgButtonLinkHandler(r,t.buttonCode,t.optType)}}},[t.buttonIcon?n("a-icon",{attrs:{type:t.buttonIcon}}):e._e(),e._v("\n                    "+e._s(t.buttonName)+"\n                  ")],1)])]:e._e()}))],2)],1)]:[e._v("--")]],2)}}])},[n("div",{attrs:{slot:"filterDropdown"},slot:"filterDropdown"},[n("a-card",[n("a-checkbox-group",{attrs:{defaultValue:e.columns},on:{change:e.onColSettingsChange},model:{value:e.columns,callback:function(t){e.columns=t},expression:"columns"}},[n("a-row",[e._l(e.columns,(function(t,r){return["rowIndex"!=t.key&&"action"!=t.dataIndex?[n("a-col",{attrs:{span:12}},[n("a-checkbox",{attrs:{value:t.dataIndex}},[e._v("\n                      "+e._s(t.title)+"\n                    ")])],1)]:e._e()]}))],2)],1)],1)],1),n("a-icon",{style:{fontSize:"16px",color:"#108ee9"},attrs:{slot:"filterIcon",type:"setting"},slot:"filterIcon"})],1),n("a-modal",{attrs:{title:"温馨提示",visible:e.tipVisible,confirmLoading:e.tipConfirmLoading},on:{ok:e.tipHandleOk,cancel:e.tipHandleCancel}},[n("p",[e._v(e._s(e.tipContent))])]),n("OnlCgformAutoModal",{ref:"modal",attrs:{code:e.code},on:{success:e.handleFormSuccess}}),n("j-import-modal",{ref:"importModal",attrs:{url:e.getImportUrl()},on:{ok:e.importOk}})],1)])},a=[],o=(n("96cf"),n("3b8d")),i=n("7c93"),s=n("89f2"),c=n("b775"),_=n("0fea"),u=n("27fc"),l=n("f36f"),p=n("5d2d"),d=n("ca00"),m=n("9fb0");window.mutationTypes=m,window.requestAPI=c,window.manageAPI=_,window.storage=p,window.tools=d,window.handleAPI=u,window.workflowAPI=l;var f={name:"OnlCgFormAutoList",components:{JImportModal:i["default"]},data:function(){return{pagination:{current:1,pageSize:10,pageSizeOptions:["10","20","30","50","100"],showQuickJumper:!0,showSizeChanger:!1,total:0},code:"",fixedWFlow:"",modelModal:!1,modelWFlowSelection:"",rights:[],description:"在线报表",currentTableName:"",tipContent:"",tipVisible:!1,tipConfirmLoading:!1,url:{getQueryInfo:"/online/cgform/api/getQueryInfo/",getColumns:"/online/cgform/api/getColumns/",getData:"/online/cgform/api/getData/",optPre:"/online/cgform/api/form/",exportXls:"/online/cgform/api/exportXls/",buttonAction:"/online/cgform/api/doButton"},flowCodePre:"onl_",isorter:{column:"createTime",order:"desc"},dictOptions:{},cgButtonLinkList:[],cgButtonList:[],queryInfo:[],queryParam:{},cityList:[],toggleSearchStatus:!1,table:{loading:!0,columns:[],settingColumns:[],dataSource:[],selectedRowKeys:[],selectionRows:[],pagination:{current:1,pageSize:1e4,pageSizeOptions:["10000"],showTotal:function(e,t){return t[0]+"-"+t[1]+" 共"+e+"条"},showQuickJumper:!0,showSizeChanger:!0,total:0}},actionColumn:{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},fixed:"right",align:"center",width:80},formTemplate:"99",EnhanceJS:"",hideColumns:["content"],buttonSwitch:{add:!0,update:!0,delete:!0,batch_delete:!0,import:!0,export:!0},hasBpmStatus:!1}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.init();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.init();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),watch:{$route:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.init();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},methods:{init:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["initComponent"](this,_);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),queryCode:function(){u["queryCode"](this)},tipHandleOk:function(){u["tipHandleOk"](this)},tipHandleCancel:function(){u["tipHandleCancel"](this)},hasBpmStatusFilter:function(){u["hasBpmStatusFilter"](this)},modalOk:function(){u["modalOk"](this)},deStringNull:function(e){return d["deNull"](e)},initQueryInfo:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["initQueryInfo"](this,_);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initAutoList:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["initAutoList"](this,_,d,s);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),processLog:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["processLog"](this,p,_,t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),loadData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["loadData"](this,t,u,_,p,d);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getQueryParams:function(){return u["getQueryParams"](this,p,d)},handleChangeInTableSelect:function(e,t){this.table.selectedRowKeys=e,this.table.selectionRows=t},handleTableChange:function(e){this.pagination=e},handleAdd:function(){this.cgButtonJsHandler("beforeAdd"),this.$refs.modal.add(this.formTemplate)},handleImportXls:function(){this.$refs.importModal.show()},handlePrintWF:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["handlePrintWF"](this,p,_);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleNotifyWF:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["handleNotifyWF"](this,p,d,_);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleFreeWF:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["handleFreeWF"](this,p,_);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleShareWF:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["handleShareWF"](this,p,d,_);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleDetailWF:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["handleDetailWF"](this,p,d,_);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleConfirmWF:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["handleConfirmWF"](this,p,d,_);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleApproveWF:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["handleApproveWF"](this,p,d,_);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleRejectWF:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["handleRejectWF"](this,p,d,_);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleSubmitWF:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["handleSubmitWF"](this,d,p,_);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleCancelWF:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["handleCancelWF"](this,p,d,_,l);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),importOk:function(){this.loadData(1)},handleExportXls2:function(){u["handleExportXls2"](this,p,d,_)},handleExportXls:function(){u["handleExportXls"](this,p,d,_)},handleEdit:function(e){this.cgButtonLinkHandler(e,"beforeEdit","js"),this.$refs.modal.edit(this.formTemplate,e.id)},handleDetail:function(e){this.$refs.modal.detail(this.formTemplate,e.id)},handleDeleteOne:function(e){this.cgButtonLinkHandler(e,"beforeDelete","js"),this.handleDelete(e.id)},handleDelete:function(e){u["handleDelete"](this,e,_)},handleFormSuccess:function(){this.loadData()},onClearSelected:function(){this.table.selectedRowKeys=[],this.table.selectionRows=[]},queryFirstFile:function(e){return e&&e.indexOf(",")>0?e.substring(0,e.indexOf(",")):e},getImgView:function(e){return window._CONFIG["downloadURL"]+"/"+this.queryFirstFile(e)},uploadFile:function(e){try{this.$message.warning("开始下载中，请稍等..."),window.saveAs(this.getImgView(e),this.queryFirstFile(e))}catch(t){window.open(this.getImgView(e))}},viewFile:function(e){u["viewFile"](this,e)},handleDelBatch:function(){u["handleDelBatch"](this)},searchByquery:function(){this.loadData(1)},searchReset:function(){this.queryParam={},this.loadData(1)},handleToggleSearch:function(){this.toggleSearchStatus=!this.toggleSearchStatus},getFormatDate:function(e){return u["getFormatDate"](e)},getImportUrl:function(){return"/online/cgform/api/importXls/"+this.code},initCgEnhanceJs:function(e){u["initCgEnhanceJs"](e,this,_)},initCgButtonList:function(e){u["initCgButtonList"](e,this)},cgButtonJsHandler:function(e){u["cgButtonJsHandler"](e,this)},cgButtonActionHandler:function(e){u["cgButtonActionHandler"](e,this,_)},cgButtonLinkHandler:function(e,t,n){u["cgButtonLinkHandler"](e,t,n,this,_)},initButtonSwitch:function(e){u["initButtonSwitch"](e,this)}}},b=f,h=n("2877"),g=Object(h["a"])(b,r,a,!1,null,null,null);t["default"]=g.exports}}]);