!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.MinDom={})}(this,function(e){"use strict";function n(e,t){if(o)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}var o=[].indexOf,t=/\s+/,i=Object.prototype.toString;function r(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}r.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~n(t,e)||t.push(e),this.el.className=t.join(" "),this},r.prototype.remove=function(e){if("[object RegExp]"==i.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),r=n(t,e);return~r&&t.splice(r,1),this.el.className=t.join(" "),this},r.prototype.removeMatching=function(e){for(var t=this.array(),r=0;r<t.length;r++)e.test(t[r])&&this.remove(t[r]);return this},r.prototype.toggle=function(e,t){return this.list?void 0!==t&&t===this.list.toggle(e,t)||this.list.toggle(e):void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this},r.prototype.array=function(){var e=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(t);return""===e[0]&&e.shift(),e},r.prototype.has=r.prototype.contains=function(e){return this.list?this.list.contains(e):!!~n(this.array(),e)};var l="undefined"!=typeof Element?Element.prototype:{},a=l.matches||l.matchesSelector||l.webkitMatchesSelector||l.mozMatchesSelector||l.msMatchesSelector||l.oMatchesSelector,s=function(e,t){if(!e||1!==e.nodeType)return!1;if(a)return a.call(e,t);for(var r=e.parentNode.querySelectorAll(t),n=0;n<r.length;n++)if(r[n]==e)return!0;return!1};var c=Element.prototype,d=c.matchesSelector||c.webkitMatchesSelector||c.mozMatchesSelector||c.msMatchesSelector||c.oMatchesSelector,u=function(e,t){if(d)return d.call(e,t);for(var r=e.parentNode.querySelectorAll(t),n=0;n<r.length;++n)if(r[n]==e)return!0;return!1};function f(e,t){if("string"!=typeof e)throw new TypeError("String expected");t=t||document;var r=/<([\w:]+)/.exec(e);if(!r)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var n=r[1];if("body"==n){return(o=t.createElement("html")).innerHTML=e,o.removeChild(o.lastChild)}var o,i=M[n]||M._default,l=i[0],a=i[1],s=i[2];for((o=t.createElement("div")).innerHTML=a+e+s;l--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);for(var c=t.createDocumentFragment();o.firstChild;)c.appendChild(o.removeChild(o.firstChild));return c}var h,p=window.addEventListener?"addEventListener":"attachEvent",v=window.removeEventListener?"removeEventListener":"detachEvent",m="addEventListener"!=p?"on":"",y={bind:function(e,t,r,n){return e[p](m+t,r,n||!1),r},unbind:function(e,t,r,n){return e[v](m+t,r,n||!1),r}},g=["focus","blur"],b={bind:function(r,n,e,o,t){return-1!==g.indexOf(e)&&(t=!0),y.bind(r,e,function(e){var t=e.target||e.srcElement;e.delegateTarget=function(e,t,r){for(var n=r?e:e.parentNode;n&&n!==document;){if(u(n,t))return n;n=n.parentNode}}(t,n,!0),e.delegateTarget&&o.call(r,e)},t)},unbind:function(e,t,r,n){-1!==g.indexOf(t)&&(n=!0),y.unbind(e,t,r,n)}},E=!1;"undefined"!=typeof document&&((h=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',E=!h.getElementsByTagName("link").length,h=void 0);var M={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:E?[1,"X<div>","</div>"]:[0,"",""]};M.td=M.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],M.option=M.optgroup=[1,'<select multiple="multiple">',"</select>"],M.thead=M.tbody=M.colgroup=M.caption=M.tfoot=[1,"<table>","</table>"],M.polyline=M.ellipse=M.polygon=M.circle=M.text=M.line=M.path=M.rect=M.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"],e.attr=function(e,t,r){return 2==arguments.length?e.getAttribute(t):null===r?e.removeAttribute(t):(e.setAttribute(t,r),e)},e.classes=function(e){return new r(e)},e.clear=function(e){for(var t;e.childNodes.length;)t=e.childNodes[0],e.removeChild(t);return e},e.closest=function(e,t,r){for(var n=r?e:e.parentNode;n&&n.nodeType!==document.DOCUMENT_NODE&&n.nodeType!==document.DOCUMENT_FRAGMENT_NODE;){if(s(n,t))return n;n=n.parentNode}return s(n,t)?n:null},e.delegate=b,e.domify=f,e.event=y,e.matches=s,e.query=function(e,t){return(t=t||document).querySelector(e)},e.queryAll=function(e,t){return(t=t||document).querySelectorAll(e)},e.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)},Object.defineProperty(e,"__esModule",{value:!0})});
